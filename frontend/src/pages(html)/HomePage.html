<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Home - Location & Event App</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(function() {
            $('#navbar-container').load('../components/Navbar.html');
        });
    </script>
    <link rel="stylesheet" href="../css/HomeStyle.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <div id="navbar-container"></div>

    <div class="home-container">
        <!-- 筛选区：恢复area筛选，修正字段 -->
        <div class="filter-section">
            <div class="filter-title">Filter Locations</div>
            <div class="filter-group">
                <div class="filter-item">
                    <label for="keywordFilter" class="filter-label">Keyword</label>
                    <div class="input-wrapper">
                        <<i class="uil uil-search input-icon"></</i>
                        <input 
                            type="text" 
                            id="keywordFilter" 
                            class="filter-input" 
                            placeholder="Search by location name">
                    </div>
                </div>

                <div class="filter-item">
                    <label for="areaFilter" class="filter-label">Area</label>
                    <div class="input-wrapper">
                        <<i class="uil uil-map-marker input-icon"></</i>
                        <select id="areaFilter" class="filter-select">
                            <option value="">All Areas</option>
                            <option value="Sha Tin">Sha Tin</option>
                            <option value="Kowloon">Kowloon</option>
                            <option value="Hong Kong Island">Hong Kong Island</option>
                            <option value="New Territories">New Territories</option>
                        </select>
                    </div>
                </div>

                <div class="filter-item">
                    <label for="distanceFilter" class="filter-label">Max Distance (km)</label>
                    <div class="input-wrapper">
                        <<i class="uil uil-distance input-icon"></</i>
                        <input 
                            type="number" 
                            id="distanceFilter" 
                            class="filter-input" 
                            placeholder="e.g., 20"
                            min="0"
                            step="0.1">
                    </div>
                </div>

                <div class="filter-action">
                    <button id="applyFilter" class="filter-btn">Apply Filters</button>
                    <button id="resetFilter" class="reset-btn">Reset</button>
                </div>
            </div>
        </div>

        <!-- 控制区：修正排序下拉框 -->
        <div class="control-section">
            <div class="sort-control">
                <label for="sortBy" class="sort-label">Sort By:</label>
                <select id="sortBy" class="sort-select">
                    <option value="name-asc">Name (A-Z)</option>
                    <option value="name-desc">Name (Z-A)</option>
                    <option value="distance-asc">Distance (Near → Far)</option>
                    <option value="distance-desc">Distance (Far → Near)</option>
                    <option value="events-asc">Events (Less → More)</option>
                    <option value="events-desc">Events (More → Less)</option>
                </select>
            </div>

            <div class="view-control">
                <button id="listViewBtn" class="view-btn active">
                    <<i class="uil uil-list-ul"></</i> List View
                </button>
                <button id="mapViewBtn" class="view-btn">
                    <<i class="uil uil-map"></</i> Map View
                </button>
            </div>

            <div class="update-time">
                Last Updated: <span id="lastUpdatedTime">Loading...</span>
            </div>
        </div>

        <!-- 列表视图：修正字段展示 -->
        <div id="listView" class="content-view active">
            <div class="location-table-container">
                <table class="location-table">
                    <thead>
                        <tr>
                            <<th>ID</</th>
                            <<th>LOCATION</</th>
                            <<th>DISTANCE (KM)</</th>
                            <<th>NUMBER OF EVENTS</</th>
                            <<th>ACTION</</th>
                        </tr>
                    </thead>
                    <tbody id="locationTableBody">
                        <tr class="loading-row">
                            <td colspan="5">Loading locations...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="mapView" class="content-view">
            <div id="locationMap" class="map-container"></div>
        </div>
    </div>

    <script src="../js/HomeScript.js"></script>
</body>
</html>